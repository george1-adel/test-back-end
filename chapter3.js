// تعريف أسئلة الفصل الثالث
const chapter3Questions = [
    // أسئلة اختيار من متعدد
    {
        chapter: 3,
        question: "ما هو الدور الأساسي الذي تلعبه نواة نظام التشغيل (Kernel)؟",
        answers: [
            "تشغيل برامج المستخدم فقط",
            "إدارة الواجهة الرسومية للنظام",
            "العمل كقلب لنظام التشغيل وتوفير واجهة بين التطبيقات والمكونات المادية",
            "توفير أدوات للمبرمجين لكتابة البرامج"
        ],
        correctAnswer: 2,
        explanation: "النواة هي قلب نظام التشغيل وتمثل الواجهة بين برامج التطبيقات والمكونات المادية للحاسوب."
    },
    {
        chapter: 3,
        question: "أي من المستويات التالية يتمتع بالقدرة على الوصول المباشر وغير المقيد لجميع موارد الجهاز؟",
        answers: [
            "مساحة المستخدم (User Mode)",
            "نواة النظام (Kernel Mode)",
            "واجهة المستخدم الرسومية (GUI)",
            "طبقة التطبيقات (Applications Layer)"
        ],
        correctAnswer: 1,
        explanation: "برامج النواة تعمل في نمط النواة (Kernel Mode) حيث يمكنها إدارة مكونات الجهاز وتتمتع بالوصول المباشر لكل شيء."
    },
    {
        chapter: 3,
        question: "ما هي الآلية التي تستخدمها التطبيقات في مساحة المستخدم (User Mode) لطلب خدمات من نواة النظام (Kernel)؟",
        answers: [
            "تفاعل مباشر مع الأجهزة المادية",
            "برامج التشغيل (Device Drivers)",
            "نداءات النظام (System Calls)",
            "لغات البرمجة عالية المستوى"
        ],
        correctAnswer: 2,
        explanation: "يتم التفاعل مع النواة في وضع المستخدم عبر نداءات النظام (System calls) لطلب خدمات من النواة."
    },
    {
        chapter: 3,
        question: "أي من أنواع الأنوية التالية يتميز بتشغيل معظم خدمات نظام التشغيل ضمن مساحة النواة (Kernel Mode)؟",
        answers: [
            "النواة الدقيقة (Microkernel)",
            "النواة المتجانسة (Monolithic kernel)",
            "النواة الهجينة (Hybrid kernel)",
            "نواة الوقت الحقيقي (Real-Time Kernel)"
        ],
        correctAnswer: 1,
        explanation: "في النواة المتجانسة، تقوم النواة نفسها بالتحكم المباشر بجميع خدمات نظام التشغيل وتكون هذه المكونات موجودة داخل النواة نفسها."
    },
    {
        chapter: 3,
        question: "أي من أنواع الأنوية التالية يتميز بتشغيل الحد الأدنى فقط من الخدمات الأساسية داخل النواة؟",
        answers: [
            "النواة المتجانسة (Monolithic kernel)",
            "النواة الهجينة (Hybrid kernel)",
            "النواة الدقيقة (Microkernel)",
            "نواة الشبكة (Network Kernel)"
        ],
        correctAnswer: 2,
        explanation: "النواة الدقيقة تتعامل مع إدارة المعالج والذاكرة والتواصل بين العمليات فقط، بينما تعمل الخدمات الأخرى في وضع المستخدم."
    },
    {
        chapter: 3,
        question: "أي من أنواع الأنوية التالية يوفر مرونة أكبر في التصميم ويسمح للمطورين باختيار مكان تشغيل مكونات النظام؟",
        answers: [
            "النواة المتجانسة (Monolithic kernel)",
            "النواة الدقيقة (Microkernel)",
            "النواة الهجينة (Hybrid kernel)",
            "نواة الوقت الحقيقي (Real-Time Kernel)"
        ],
        correctAnswer: 2,
        explanation: "تتمتع النواة الهجينة بمرونة أكبر في التصميم حيث تتيح للمطور اختيار ما يريد تشغيله في وضع المستخدم وما يريد تشغيله في وضع المشرف."
    },
    {
        chapter: 3,
        question: "أي من أنظمة التشغيل التالية يُعتبر مثالاً على الأنظمة التي تستخدم النواة الدقيقة (Microkernel)؟",
        answers: [
            "Windows 10",
            "Linux",
            "Symbian",
            "macOS X"
        ],
        correctAnswer: 2,
        explanation: "Symbian هو مثال لأنظمة التشغيل التي تعمل بالنواة الدقيقة."
    },
    {
        chapter: 3,
        question: "أي من أنظمة التشغيل التالية يُعتبر مثالاً على الأنظمة التي تستخدم النواة المتجانسة (Monolithic kernel)؟",
        answers: [
            "QNX",
            "Windows XP",
            "DOS",
            "iOS"
        ],
        correctAnswer: 2,
        explanation: "DOS هو أحد الأمثلة للأنظمة التي تعمل بالنواة المتجانسة. Windows XP و iOS أمثلة على النواة الهجينة، و QNX مثال على النواة الدقيقة."
    },
    {
        chapter: 3,
        question: "واحدة من مميزات النواة الدقيقة (Microkernel) المذكورة في المصدر هي:",
        answers: [
            "تتطلب مساحة تثبيت كبيرة",
            "تتميز بأمان عالي",
            "تتفاعل المكونات المادية مباشرة",
            "لا يوجد طابور انتظار للوصول إلى المعالج"
        ],
        correctAnswer: 1,
        explanation: "من مميزات النواة الدقيقة أنها تتميز بمستوى عالي من الأمان."
    },
    {
        chapter: 3,
        question: "ما هو أحد عيوب النواة المتجانسة (Monolithic kernel)؟",
        answers: [
            "تتطلب مساحة ذاكرة صغيرة أثناء عمل النظام",
            "أقل أماناً من النواة الدقيقة",
            "تفاعل العمليات مع بعضها البعض بطيء بسبب طابور الانتظار",
            "يصعب إضافة وحدات kernel جديدة"
        ],
        correctAnswer: 1,
        explanation: "النواة المتجانسة أقل أماناً من النواة الدقيقة لأن الكثير من المكونات تعمل في وضع المشرف."
    },
    {
        chapter: 3,
        question: "أي من أنظمة التشغيل التالية يُعد مثالاً على النواة الهجينة (Hybrid kernel)؟",
        answers: [
            "Windows 98",
            "Linux distributions",
            "AmigaOS",
            "Windows 10"
        ],
        correctAnswer: 3,
        explanation: "Windows 10 هو أحد الأمثلة للأنظمة التي تعمل بالنواة الهجينة."
    },
    {
        chapter: 3,
        question: "في أي نمط يتم تحميل برامج النظام التي تقوم بإدارة عتاد الحاسوب مثل المعالج والذاكرة والأجهزة الطرفية؟",
        answers: [
            "نمط المستخدم (User Mode)",
            "نمط النواة (Kernel Mode)",
            "نمط التطبيق (Application Mode)",
            "نمط الإدخال/الإخراج (I/O Mode)"
        ],
        correctAnswer: 1,
        explanation: "في هذا النمط (Kernel Mode)، يتم تحميل برامج النظام التي تقوم بإدارة عتاد الحاسوب ومكوناته المادية."
    },
    {
        chapter: 3,
        question: "ما هو المكون المسؤول عن ربط التطبيقات بالأجهزة المادية الموجودة بالحاسوب؟",
        answers: [
            "الواجهة الرسومية (GUI)",
            "لغات البرمجة (Programming Languages)",
            "نواة نظام التشغيل (Operating System Kernel)",
            "واجهة المستخدم (User Interface)"
        ],
        correctAnswer: 2,
        explanation: "النواة هي المسؤولة عن توصيل جميع التطبيقات التي تعمل في \"وضع المستخدم\" بالأجهزة المادية."
    },
    {
        chapter: 3,
        question: "أي مما يلي ليس من أنواع الأنوية الأساسية الثلاثة المذكورة في الفصل الثالث؟",
        answers: [
            "النواة الدقيقة (Microkernel)",
            "النواة المتجانسة (Monolithic kernel)",
            "نواة الشبكة (Network kernel)",
            "النواة الهجينة (Hybrid kernel)"
        ],
        correctAnswer: 2,
        explanation: "يذكر الفصل ثلاثة أنواع رئيسية للأنوية وهي النواة الدقيقة والمتجانسة والهجينة. نواة الشبكة لم تُذكر كنوع أساسي من الأنوية في هذا الفصل."
    },
    // أسئلة صح وخطأ
    {
        chapter: 3,
        question: "تعمل جميع برامج نظام التشغيل في مساحة المستخدم (User Mode) للوصول المباشر إلى الأجهزة المادية.",
        answers: [
            "صح",
            "خطأ"
        ],
        correctAnswer: 1,
        explanation: "برامج النظام التي تتفاعل مباشرة مع الأجهزة المادية تعمل في نمط النواة (Kernel Mode)، بينما تعمل التطبيقات في مساحة المستخدم."
    },
    {
        chapter: 3,
        question: "تُعتبر نداءات النظام (System Calls) هي الطريقة التي تستخدمها التطبيقات لطلب خدمات من نواة نظام التشغيل.",
        answers: [
            "صح",
            "خطأ"
        ],
        correctAnswer: 0,
        explanation: "تستخدم نداءات النظام عبر واجهة نداءات النظام (System Call Interface) لطلب خدمات النظام من النواة."
    },
    {
        chapter: 3,
        question: "تتكون بنية نظام التشغيل من طبقتين رئيسيتين هما: قلب نظام التشغيل (Kernel Mode) ومساحة المستخدم (User Mode).",
        answers: [
            "صح",
            "خطأ"
        ],
        correctAnswer: 0,
        explanation: "يتكون نظام التشغيل من طبقتين رئيسيتين هما قلب نظام التشغيل (Kernel Mode) ومساحة المستخدم (User Mode)."
    },
    {
        chapter: 3,
        question: "تتميز النواة الدقيقة (Microkernel) بأن جميع خدمات نظام التشغيل تعمل داخل النواة نفسها.",
        answers: [
            "صح",
            "خطأ"
        ],
        correctAnswer: 1,
        explanation: "في النواة الدقيقة، يعمل الحد الأدنى فقط من الخدمات الأساسية داخل النواة، بينما تعمل الخدمات الأخرى في مساحة المستخدم."
    },
    {
        chapter: 3,
        question: "يُعتبر نظام التشغيل Linux مثالاً على الأنظمة التي تستخدم النواة المتجانسة (Monolithic kernel).",
        answers: [
            "صح",
            "خطأ"
        ],
        correctAnswer: 0,
        explanation: "جميع توزيعات Linux، بما في ذلك Ubuntu، تستخدم نواة Linux المعدلة كنواة متجانسة."
    },
    {
        chapter: 3,
        question: "من مميزات النواة الدقيقة (Microkernel) أنها تتطلب مساحة صغيرة جداً للتثبيت.",
        answers: [
            "صح",
            "خطأ"
        ],
        correctAnswer: 0,
        explanation: "النواة الدقيقة تتطلب مساحة صغيرة للتثبيت."
    },
    {
        chapter: 3,
        question: "في النواة المتجانسة (Monolithic kernel)، يمكن أن تؤدي المشاكل في أحد مكونات النواة إلى انهيار النظام بأكمله.",
        answers: [
            "صح",
            "خطأ"
        ],
        correctAnswer: 0,
        explanation: "في النواة المتجانسة، قد يؤدي عدم تصرف المستخدم بشكل صحيح مع الأخطاء أو وضع النواة في وضع المشرف إلى احتمالات حدوث أخطاء قد تؤدي إلى انهيار النظام."
    },
    {
        chapter: 3,
        question: "يُستخدم التواصل بين العمليات (Inter-Process Communication - IPC) في النواة الدقيقة (Microkernel) للسماح للعمليات في مساحة المستخدم بالوصول إلى موارد النظام والاتصال مع النواة.",
        answers: [
            "صح",
            "خطأ"
        ],
        correctAnswer: 0,
        explanation: "تتعامل النواة الدقيقة مع التواصل بين العمليات (IPC) للسماح للعمليات بالوصول إلى المعلومات."
    },
    {
        chapter: 3,
        question: "تُعتبر أنظمة التشغيل Windows NT والإصدارات الأحدث منها (مثل Windows 10) أمثلة على النواة المتجانسة (Monolithic kernel).",
        answers: [
            "صح",
            "خطأ"
        ],
        correctAnswer: 1,
        explanation: "أنظمة التشغيل Windows NT والإصدارات الأحدث (مثل Windows 10) هي أمثلة على النواة الهجينة (Hybrid kernel)."
    },
    {
        chapter: 3,
        question: "النواة الهجينة (Hybrid kernel) تجمع بين خصائص النواة الدقيقة والنواة المتجانسة.",
        answers: [
            "صح",
            "خطأ"
        ],
        correctAnswer: 0,
        explanation: "النواة الهجينة أو المختلطة تجمع بين الأنوية المصغرة والأنوية المتجانسة."
    }
];

// إضافة خاصية الفصل لكل سؤال
chapter3Questions.forEach(q => {
    if (!q.chapter) {
        q.chapter = 3;
    }
});

// التأكد من وجود مصفوفة الأسئلة العامة
if (typeof window.questions === 'undefined') {
    window.questions = [];
}

// دمج أسئلة الفصل الثالث مع المصفوفة العامة
window.questions = window.questions.concat(chapter3Questions);

// تأكيد إضافة الأسئلة
console.log('تم إضافة أسئلة الفصل الثالث بنجاح');
console.log('عدد أسئلة الفصل الثالث:', chapter3Questions.length);
console.log('إجمالي عدد الأسئلة:', window.questions.length);

// التحقق من صحة إضافة الأسئلة
const chapter3QuestionsCount = window.questions.filter(q => Number(q.chapter) === 3).length;
console.log('عدد أسئلة الفصل الثالث في المصفوفة العامة:', chapter3QuestionsCount);
